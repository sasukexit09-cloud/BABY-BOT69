const fs = global.nodemodule["fs-extra"];
const path = global.nodemodule["path"];

module.exports.config = {
  name: "autoreplybot",
  version: "6.0.3",
  hasPermssion: 0,
  credits: "AYAN ЁЯШ╢тАНЁЯМля╕П",
  description: "Auto-response bot with specified triggers (ready-to-run, error-proof)",
  commandCategory: "No Prefix",
  usages: "[any trigger]",
  cooldowns: 3,
};

const responses = new Map([
  ["miss you", "ржЕрж░рзЗржХ ржмрзЗржбрж╛рж░рзЗ Miss ржирж╛ ржХрж░рзЗ xan ржорзЗржпрж╝рзЗ рж╣рж▓рзЗ ржмрж╕ ржЖрзЯрж╛ржи рж░рзЗ рж╣рж╛ржЩрзНржЧрж╛ ржХрж░рзЛЁЯШ╢ЁЯС╗ЁЯШШ"],
  ["kiss de", "ржХрж┐рж╕ ржжрж┐рж╕ ржирж╛ рждрзЛрж░ ржорзБржЦрзЗ ржжрзВрж░ ржЧржирзНржз ржХржпрж╝ржжрж┐ржи ржзрж░рзЗ ржжрж╛ржБржд ржмрзНрж░рж╛рж╢ ржХрж░рж┐рж╕ ржирж╛ржЗЁЯдм"],
  ["ЁЯСН", "рж╕рж░ ржПржЦрж╛ржи ржерзЗржХрзЗ рж▓рж╛ржЗржХрж╛рж░ ржмрж▓ржж..!ЁЯР╕ЁЯдгЁЯСНтЫПя╕П"],
  ["help", "Prefix de sala"],
  ["hi", "ржПржд рж╣рж╛ржЗ-рж╣рзНржпрж╛рж▓рзЛ ржХрж░ ржХрзНржпрж╛ржи ржкрзНрж░рж┐ржУ..!ЁЯШЬЁЯл╡"],
  ["bc", "SAME TO YOUЁЯШК"],
  ["pro", "Khud k0o KYa LeGend SmJhTi Hai ЁЯШВ"],
  ["good morning", "GOOD MORNING ржжрж╛ржд ржмрзНрж░рж╛рж╢ ржХрж░рзЗ ржЦрзЗрзЯрзЗ ржирзЗржУЁЯШЪ"],
  ["tor ball", "~ ржПржЦржирзЛ ржмрж╛рж▓ ржЙржарзЗ ржирж╛ржЗ ржирж╛ржХрж┐ рждрзЛржорж╛рж░?? ЁЯдЦ"],
  ["ayan", "ржЙржирж┐ ржПржЦржи ржХрж╛ржЬрзЗ ржмрж┐ржЬрж┐ ржЖржЫрзЗ ржХрж┐ ржмрж▓ржмрзЗржи ржЖржорж╛ржХрзЗ ржмрж▓рждрзЗ ржкрж╛рж░рзЗржи..!ЁЯШШ"],
  ["owner", "тАО[ЁЭРОЁЭРЦЁЭРНЁЭРДЁЭРС:тШЮ ЁЭРАЁЭРШЁЭРАЁЭРН тШЬ\nFacebook: https://www.facebook.com/profile.php?id=61584308632995\nWhatsApp: +8801914227459"],
  ["admin", "He is ЁЭРАЁЭРШЁЭРАЁЭРН рждрж╛ржХрзЗ рж╕ржмрж╛ржЗ ЁЭРБЁЭРАЁЭРБЁЭРШ ЁЭРЦЁЭРОЁЭРСЁЭРЛЁЭРГ ЁЭРТЁЭРФЁЭРПЁЭРПЁЭРОЁЭРСЁЭРУ Admin рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐ржирзЗЁЯШШтШ║я╕П"],
  ["baby", "ржП рждрзЛ рж╣рж╛ржЫрж┐ржирж╛ рж╣рзЗ ржорзЗрж░рзЗ ржжрж┐рж▓ржХрж┐ ржжрж╛рж░ржХрж╛ржи рж╣рзЗ ржорзЗрж░рж┐ ржЬрж╛ржи рж╣рзЗЁЯШН."],
  ["chup", "рждрзБржЗ ржЪрзБржк ржЪрзБржк ржХрж░ ржкрж╛ржЧрж▓ ржЫрж╛ржЧрж▓"],
  ["assalamualaikum", "┘И┘О╪╣┘О┘Д┘О┘К┘Т┘Г┘П┘Е┘П ╪з┘Д╪│┘О┘С┘Д┘О╪з┘Е┘П ┘И┘О╪▒┘О╪н┘Т┘Е┘О╪й┘П ╪з┘Д┘Д┘З┘Р ┘И┘О╪и┘О╪▒┘О┘Г┘О╪з╪к┘П┘З┘П ЁЯТЦ"],
  ["kiss me", "рждрзБржорж┐ ржкржБржЪрж╛ рждрзЛржорж╛ржХрзЗ ржХрж┐рж╕ ржжрж┐ржмрзЛ ржирж╛ ЁЯдн"],
  ["thanks", "ржПрждрзЛ ржзржирзНржпржмрж╛ржж ржирж╛ ржжрж┐ржпрж╝рзЗ ржЖржорж╛рж░ ржмрж╕ ржЖрзЯрж╛ржи рж░рзЗ рждрзЛрж░ ржЧрж╛рж░рзНрж▓ржлрзНрж░рзЗржирзНржб ржЯрж╛ ржжрж┐ржпрж╝рзЗ ржжрзЗ..!ЁЯР╕ЁЯе╡"],
  ["i love you", "ржорзЗржпрж╝рзЗ рж╣рж▓рзЗ ржЖржорж╛рж░ ржмрж╕ ржЖрзЯрж╛ржи ржПрж░ ржЗржиржмржХрзНрж╕рзЗ ржПржЦрзБржирж┐ ржЧрзБржБрждрж╛ ржжрж┐ржиЁЯлвЁЯШ╗"],
  ["by", "ржХрж┐рж░рзЗ рждрзБржЗ ржХржЗ ржпрж╛рж╕ ржХрзЛржи ржорзЗржпрж╝рзЗрж░ рж╕рж╛ржерзЗ ржЪрж┐ржкрж╛ржпрж╝ ржпрж╛ржмрж┐..!ЁЯМЪЁЯМ╢я╕П"],
  ["ami ayan", "рж╣рзНржпрж╛ ржмрж╕ ржХрзЗржоржи ржЖржЫрзЗржи..?тШ║я╕П"],
  ["bot er baccha", "ржЖржорж╛рж░ ржмрж╛ржЪрзНржЪрж╛ рждрзЛ рждрзЛржорж╛рж░ ржЧрж╛рж░рзНрж▓ржлрзНрж░рзЗржирзНржбрзЗрж░ ржкрзЗржЯрзЗ..!!ЁЯМЪтЫПя╕П"],
  ["tor nam ki", "MY NAME IS тФАъпнтФАтГЭтАМтАМЁЭЧХЁЭЧФ'ЁЭЧХЁЭЧм уБПуВБЁЯТЦ"],
  ["pic de", "ржПржи ржерзЗржХрзЗ рж╕рж░ ржжрзБрж░рзЗ ржЧрж┐рзЯрж╛ ржорж░ЁЯШТ"],
  ["cudi", "ржПржд ржЪрзЛржжрж╛ ржЪрзБржжрж┐ ржХрж░рж╕ ржХрзЗржирзЛ..!ЁЯе▒ЁЯМЭЁЯМЪ"],
  ["bal", "рж░рж╛ржЧ ржХрж░рзЗ ржирж╛ рж╕рзЛржирж╛ ржкрж╛ржЦрж┐ ЁЯе░"],
  ["heda", "ржПрждрзЛ рж░рж╛ржЧ рж╢рж░рзАрж░рзЗрж░ ржЬржирзНржп ржнрж╛рж▓рзЛ ржирж╛ ЁЯе░"],
  ["boda", "ржнрж╛ржЗ рждрзБржЗ ржПржд рж╣рж╛рж╕рж┐рж╕ ржирж╛..!ЁЯМЪЁЯдг"],
  ["love you", "ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ ржирж╛ржоржХ ржЖржмрж▓рж╛ржорзА ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ Boss ржЖрзЯрж╛ржи ржПрж░ ржЗржиржмржХрзНрж╕рзЗ ржЧрзБрждрж╛ ржжрж┐ржи ЁЯШШ"],
  ["kire ki koros", "рждрзЛржорж╛рж░ ржХржерж╛ ржнрж╛ржмрждрзЗ ржЫрж┐ ржЬрж╛ржирзБ"],
  ["kire bot", "рж╣рзНржпрж╛ржБ рж╕ржм ржХрзЗржоржи ржЖржЫрзЗржи ржЖржкржирж╛рж░ ржУржЗ ржЦрж╛ржирзЗ ржЙржорзНржорж╛рж╣ ЁЯШШЁЯШ╜ЁЯЩИ"]
]);

module.exports.handleEvent = async function ({ api, event, Users }) {
  try {
    if (!api || !event) return; // On-start safety

    const { threadID, messageID, senderID, body } = event;
    if (!body) return;

    const msg = body.toLowerCase().trim();
    const name = Users ? await Users.getNameUser(senderID) : "User";

    // Exact match
    if (responses.has(msg)) {
      return api.sendMessage(responses.get(msg), threadID, messageID);
    }

    // Partial match (optional)
    for (let [key, reply] of responses) {
      if (msg.includes(key)) {
        return api.sendMessage(reply, threadID, messageID);
      }
    }
  } catch (err) {
    console.error("Auto-reply bot error:", err);
  }
};

// Run function for manual trigger
module.exports.run = async function ({ api, event, args, Users }) {
  return this.handleEvent({ api, event, Users });
};
